!----------------- Input deck illustrating the Python-Fortran interface ------------------
! To run this input deck as is, first put the input deck, OSIRIS executable, and the
! py-script-1d.py file all in the same directory.  Next, do `export PYTHONPATH=.` to set the Python
! path to the directory that contains the py-script-1d.py file (current directory). Finally,
! execute `./osiris-1D.e test_1d.1d` to run the simulation, which will use the
! py-script-1d.py and interp.npy files to set various field and particle data.
!-----------------------------------------------------------------------------------------

!----------global simulation parameters----------
simulation 
{
    parallel_io = "mpi",
    algorithm = "cpu",
}

!--------the node configuration for this simulation--------
node_conf 
{
    
    node_number = 16,
    n_threads = 2,
    if_periodic(1:1) = .false.,
    
    
}

!----------spatial grid----------
grid
{
    
    nx_p = 0, ! number of cells in x-direction
    
}

!----------time step and global data dump timestep number----------
time_step
{
    dt     =   9.5e-02,
    ndump  =   9131,
}

!----------restart information----------
restart
{
    ndump_fac = -1,
    ndump_time = 3500, !once/hour
    if_restart = .false.,
    if_remold = .true.,
}

!----------spatial limits of the simulations----------
space
{
    
    ! This is euclidean distance, not the span in y direction
    ! Start point in 1D plane is specified in py-script-1d
    xmin =  0, ! This should always be == 0
    xmax =  6.123233995736766e-14,
    
}

!----------time limits ----------
time
{
    tmin = 0.0,
    tmax  = 347000,
}

!----------field solver set up----------
el_mag_fld
{
    ! Note, you need to set PYTHONPATH in the console to the folder containing py-script-1d.py
    type_init_b(1:3) = "python", "python", "python",
    type_init_e(1:3) = "python", "python", "python",
    init_py_mod = "py-script-1d", ! Name of Python file
    init_py_func = "set_fld_int", ! Name of function in the Python file to call (same for all components)
}

!----------boundary conditions for em-fields ----------
emf_bound
{
    
    type(1:2,1) =   "pmc", "vpml",
    vpml_bnd_size = 50,
    vpml_diffuse(1:2,1) = .true., .true.,
    
}

!----------- electro-magnetic field diagnostics ---------
diag_emf
{
    reports = 
    "b1, savg",
    "b2, savg",
    "b3, savg",
    "e1, savg",
    "e2, savg",
    "e3, savg",

    ndump_fac_ave = 1,
    ndump_fac_ene_int = 10,
    ndump_fac_charge_cons = 10,
    
    n_ave(1:1) = 4,
    
}

!----------number of particle species----------
particles
{
    interpolation = "cubic",
    num_species = 3,
}


!----------information for e----------
species
{
    name = "e",
    rqm = -1.0,
    
    num_par_x = 8,
    
    init_type = "python",
}

!----------inital proper velocities - e-----------------
udist
{
    use_spatial_uth = .true.,
    uth_py_mod = "py-script-1d", ! Name of Python file
    uth_py_func = "set_uth_e", ! Name of function in the Python file to call

    ! use_spatial_ufl = .true.,
    ufl_py_mod = "py-script-1d", ! Name of Python file
    ufl_py_func = "set_ufl_e", ! Name of function in the Python file to call
}

!----------density profile for e----------
profile
{
    py_mod = "py-script-1d", ! Name of Python file
    py_func = "set_density_e", ! Name of function in the Python file to call
}

!----------boundary conditions for e----------
spe_bound
{
    
    type(1:2,1) = "thermal","thermal",
    uth_bnd(1:3,1,1) = 5.7341e-02, 5.7341e-02, 5.7341e-02, 
    uth_bnd(1:3,2,1) = 4.4428e-02, 4.4428e-02, 4.4428e-02, 
    
}

!----------diagnostic for e----------
diag_species
{
    ndump_fac = 1,
    ndump_fac_temp = 1,
    ndump_fac_ene = 1,
    reports = "charge", "j1", "j2", "j3", "q1", "q2", "q3",
    rep_udist = "uth1", "uth2", "ufl1", "ufl2",
    ndump_fac_pha = 1,
    ps_pmin(1:3) = -0.1, -0.1, -0.02,
    ps_pmax(1:3) = 0.1,  0.1,  0.02,
    
    ps_xmin(1:1) = 0.0,
    ps_xmax(1:1) = 6.123233995736766e-14,
    
    ps_np = , , ,
    
    ps_nx = ,
    phasespaces = "p1x1", "p2x1", "p3x1",
    
}

!----------information for al----------
species
{
    name = "al",
    rqm = 725,
    
    num_par_x = 8,
    
    init_type = "python",
}

!----------inital proper velocities - al-----------------
udist
{
    use_spatial_uth = .true.,
    uth_py_mod = "py-script-1d", ! Name of Python file
    uth_py_func = "set_uth_al", ! Name of function in the Python file to call

    ! use_spatial_ufl = .true.,
    ufl_py_mod = "py-script-1d", ! Name of Python file
    ufl_py_func = "set_ufl_al", ! Name of function in the Python file to call
}

!----------density profile for al----------
profile
{
    py_mod = "py-script-1d", ! Name of Python file
    py_func = "set_density_al", ! Name of function in the Python file to call
}

!----------boundary conditions for al----------
spe_bound
{
    
    type(1:2,1) = "thermal","thermal",
    uth_bnd(1:3,1,1) = 1.7593e-03, 1.7593e-03, 1.7593e-03, 
    uth_bnd(1:3,2,1) = 5.9264e-04, 5.9264e-04, 5.9264e-04, 
    
}

!----------diagnostic for al----------
diag_species
{
    ndump_fac = 1,
    ndump_fac_temp = 1,
    ndump_fac_ene = 1,
    reports = "charge", "j1", "j2", "j3", "q1", "q2", "q3",
    rep_udist = "uth1", "uth2", "ufl1", "ufl2",
    ndump_fac_pha = 1,
    ps_pmin(1:3) = -0.05, -0.05, -0.02,
    ps_pmax(1:3) = 0.05,  0.05,  0.02,
    
    ps_xmin(1:1) = 0.0,
    ps_xmax(1:1) = 6.123233995736766e-14,
    
    ps_np = , , ,
    
    ps_nx = ,
    phasespaces = "p1x1", "p2x1", "p3x1",
    
}

!----------information for si----------
species
{
    name = "si",
    rqm = 389,
    
    num_par_x = 8,
    
    init_type = "python",
}

!----------inital proper velocities - si-----------------
udist
{
    use_spatial_uth = .true.,
    uth_py_mod = "py-script-1d", ! Name of Python file
    uth_py_func = "set_uth_si", ! Name of function in the Python file to call

    ! use_spatial_ufl = .true.,
    ufl_py_mod = "py-script-1d", ! Name of Python file
    ufl_py_func = "set_ufl_si", ! Name of function in the Python file to call
}

!----------density profile for si----------
profile
{
    py_mod = "py-script-1d", ! Name of Python file
    py_func = "set_density_si", ! Name of function in the Python file to call
}

!----------boundary conditions for si----------
spe_bound
{
    
    type(1:2,1) = "thermal","thermal",
    uth_bnd(1:3,1,1) = 2.4001e-03, 2.4001e-03, 2.4001e-03, 
    uth_bnd(1:3,2,1) = 8.0852e-04, 8.0852e-04, 8.0852e-04, 
    
}

!----------diagnostic for si----------
diag_species
{
    ndump_fac = 1,
    ndump_fac_temp = 1,
    ndump_fac_ene = 1,
    reports = "charge", "j1", "j2", "j3", "q1", "q2", "q3",
    rep_udist = "uth1", "uth2", "ufl1", "ufl2",
    ndump_fac_pha = 1,
    ps_pmin(1:3) = -0.05, -0.05, -0.02,
    ps_pmax(1:3) = 0.05,  0.05,  0.02,
    
    ps_xmin(1:1) = 0.0,
    ps_xmax(1:1) = 6.123233995736766e-14,
    
    ps_np = , , ,
    
    ps_nx = ,
    phasespaces = "p1x1", "p2x1", "p3x1",
    
}


!----------diagnostic for currents----------
diag_current
{
}

!---------- end of osiris input file -------------